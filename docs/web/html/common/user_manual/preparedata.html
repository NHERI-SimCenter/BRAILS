

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Prepare and fuse data &mdash; BRAILS 2.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../_static/SimCenter_logo.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../index.html">


  <img src="../../_static/SimCenter_BRAILS_logo_solo.png" class="logo" alt="Logo"/>
</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="acknowledgments.html">1. Acknowledgments</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">2. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="userGuide.html">4. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">5. Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">6. Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">7. Bugs &amp; Feature Requests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">8. Copyright and License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/theory.html">1. Theory and Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/vnv.html">2. Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/understand.html">3. Generalization</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BRAILS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Prepare and fuse data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/common/user_manual/preparedata.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="prepare-and-fuse-data">
<span id="lbl-preparedata"></span><h1>Prepare and fuse data<a class="headerlink" href="#prepare-and-fuse-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-google-map-api-key">
<h2>Get google map api key<a class="headerlink" href="#get-google-map-api-key" title="Permalink to this headline">¶</a></h2>
<p>Obtain the API key from <a class="reference external" href="https://developers.google.com/maps/documentation/embed/get-api-key">https://developers.google.com/maps/documentation/embed/get-api-key</a>.</p>
<p>Define api key in src/keys.py file like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GoogleMapAPIKey</span> <span class="o">=</span> <span class="s2">&quot;replace this with your key&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="prepare-a-list-of-building-addresses-in-csv-format">
<h2>Prepare a list of building addresses in csv format<a class="headerlink" href="#prepare-a-list-of-building-addresses-in-csv-format" title="Permalink to this headline">¶</a></h2>
<p>For example, Atlantic_Cities_Addrs.csv looks like <code class="xref std std-numref docutils literal notranslate"><span class="pre">address_list</span></code>.</p>
<div class="align-center figure" id="id2">
<span id="address-list"></span><img alt="../../_images/addressList.png" src="../../_images/addressList.png" />
<p class="caption"><span class="caption-text">Address list</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Noticing that, in addition to addresses, there are extra columns containing basic building information (e.g., stories, occupancy, etc.).
These basic information are scraped from tax websites.
It should be noted that, for a portion of these buildings, some building information may be missing from the websites.
In this case, just leave them blank in csv file.</p>
<p>Once <a class="reference external" href="https://berkeley.box.com/shared/static/hi0nzfykbadtczioj4tymrsjjgwahhbw.csv">Atlantic_Cities_Addrs.csv</a> is prepared, define the path of it in src/confiugre.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cleanedBIMFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/Atlantic_Cities_Addrs.csv&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="prepare-a-boundary-file-of-the-region-of-interest-in-geojson-format">
<h2>Prepare a boundary file of the region of interest in geojson format<a class="headerlink" href="#prepare-a-boundary-file-of-the-region-of-interest-in-geojson-format" title="Permalink to this headline">¶</a></h2>
<p>Define the path in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RegionBoundaryFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/AtlanticCoastalCities_Boundary.geojson&quot;</span>
</pre></div>
</div>
<p>For this demo, we have prepared this boundary file for you, download from <a class="reference external" href="https://berkeley.box.com/shared/static/gfridzvcjo6k533554q9plh0g3v9fpzi.geojson">here</a>.</p>
</div>
<div class="section" id="prepare-building-footprints-in-geojson-format">
<h2>Prepare building footprints in geojson format<a class="headerlink" href="#prepare-building-footprints-in-geojson-format" title="Permalink to this headline">¶</a></h2>
<p>AI generated building footprints database -&gt; <a class="reference external" href="https://github.com/microsoft/USBuildingFootprints">USBuildingFootprints</a>.</p>
<p>We have prepared a cleaned version that just contains Atlantic coastal cities, download from <a class="reference external" href="https://berkeley.box.com/shared/static/0ueibjzbo1b0mgru4h6n8l2rmww8nx0z.geojson">here</a>.</p>
<p>Define the path of this footprints file in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">BuildingFootPrintsFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/AtlanticCoastalCities_Footprints.geojson&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="geocode-buildings-and-create-a-basic-bim-file-for-this-region">
<h2>Geocode buildings and create a basic BIM file for this region.<a class="headerlink" href="#geocode-buildings-and-create-a-basic-bim-file-for-this-region" title="Permalink to this headline">¶</a></h2>
<p>Define the file path to store BIM for all buildings in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resultBIMFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/Atlantic_Cities_BIM.geojson&quot;</span>
</pre></div>
</div>
<p>Then run the following command from src/preparedata (This will cost $ because it calls Google API.
To avoid this, download the <a class="reference external" href="https://berkeley.box.com/shared/static/mb8dya89hslfj1eo8rzns2v6gllq4x68.zip">Atlantic geocoding file</a> and unzip it in your data/preparedata dir.
The code will first look into this dir for geocoding information, if it was not there, the code will call Google API.)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python geocoding_addr.py
</pre></div>
</div>
<p>This will create a BIM file Atlantic_Cities_BIM.geojson containing basic building information within the interested region.
The generated BIM file can be visulized in a GIS software, such as QGIS.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;type&quot;: &quot;FeatureCollection&quot;,
    &quot;features&quot;: [{
                    &quot;type&quot;: &quot;Feature&quot;,
                    &quot;id&quot;: &quot;8460&quot;,
                    &quot;properties&quot;: {
                            &quot;id&quot;: &quot;8460&quot;,
                            &quot;lat&quot;: 39.371879,
                            &quot;lon&quot;: -74.456126,
                            &quot;address&quot;: &quot;1970 W RIVERSIDE DR, ATLANTIC CITY,NJ&quot;,
                            &quot;stories&quot;: 2,
                            &quot;yearBuilt&quot;: 2006,
                            &quot;occupancy&quot;: &quot;Residential&quot;,
                            &quot;structureType&quot;: &quot;Frame&quot;,
                            &quot;buildingDescription&quot;: &quot;2SF&quot;,
                            &quot;city&quot;: &quot;ATLANTIC CITY CITY&quot;
                    },
                    &quot;geometry&quot;: {
                            &quot;type&quot;: &quot;Polygon&quot;,
                            &quot;coordinates&quot;: [
                                    [
                                            [-74.45606, 39.371837],
                                            [-74.455935, 39.371934],
                                            [-74.456037, 39.372013],
                                            [-74.456162, 39.371916],
                                            [-74.45606, 39.371837]
                                    ]
                            ]
                    }
            },
            {
                    &quot;type&quot;: &quot;Feature&quot;,
                    &quot;id&quot;: &quot;8461&quot;,
                    &quot;properties&quot;: {
                            &quot;id&quot;: &quot;8461&quot;,
                            &quot;lat&quot;: 39.3716807,
                            &quot;lon&quot;: -74.4513949,
                            &quot;address&quot;: &quot;1619 COLUMBIA AVE, ATLANTIC CITY,NJ&quot;,
                            &quot;stories&quot;: 2,
                            &quot;yearBuilt&quot;: 1979,
                            &quot;occupancy&quot;: &quot;Residential&quot;,
                            &quot;structureType&quot;: &quot;Frame&quot;,
                            &quot;buildingDescription&quot;: &quot;2SF&quot;,
                            &quot;city&quot;: &quot;ATLANTIC CITY CITY&quot;
                    },
                    &quot;geometry&quot;: {
                            &quot;type&quot;: &quot;Polygon&quot;,
                            &quot;coordinates&quot;: [
                                    [
                                            [-74.451353, 39.371717],
                                            [-74.451493, 39.371755],
                                            [-74.451526, 39.37168],
                                            [-74.451386, 39.371643],
                                            [-74.451353, 39.371717]
                                    ]
                            ]
                    }
            }
    ]
}
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, NHERI SimCenter.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>